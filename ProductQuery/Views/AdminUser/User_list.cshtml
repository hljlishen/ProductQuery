@model List<ProductQuery.Models.User>
@{
    Layout = "~/Views/Admin/AdminIndex.cshtml";
}

<script type="text/javascript">

    //添加
    function openAddWin() {
        //设定title内容
        var title = "<a><span class='glyphicon glyphicon-plus'></span>新增管理员</a>";
        var url = "User_add";
        var width = "100%";
        var height = "600px";
        //调用位于index页面的openWin()函数
        parent.openWin(title, url, width, height);
    }

    //修改
    function openUpdateWin(userid) {
        var title = "<span class='glyphicon glyphicon-edit'> 修改管理员信息";
        var url = "User_update?userId=" + userid;
        var width = "100%";
        var height = "300px";
        parent.openWin(title, url, width, height);
    }

    //授权
    function openAuthorWin(roleId) {
        var title = "<a><span class='glyphicon glyphicon-wrench'></span>角色授权</a>";
        var url = "<%=request.getContextPath()%>/role/roleAuthor?roleId=" + roleId;
        var width = "100%";
        var height = "600px";
        parent.openWin(title, url, width, height);
    }
</script>

<div class="container mt-5">

    <div class="row tm-content-row">
        <div class="col-12 tm-block-col">
            <div class="tm-bg-primary-dark tm-block tm-block-h-auto">
                <div class="form-inline">
                    <a class="btn btn-success btn-sm" href="javascript:openAddWin();">
                        <span class="glyphicon glyphicon-plus">添加用户</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="row tm-content-row">
        <div class="col-12 tm-block-col">
            <div class="tm-bg-primary-dark tm-block tm-block-taller tm-block-scroll">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">@Html.LabelFor(users => users[0].id)</th>
                            <th scope="col">@Html.LabelFor(users => users[0].name)</th>
                            <th scope="col">@Html.LabelFor(users => users[0].Phone)</th>
                            <th scope="col">@Html.LabelFor(users => users[0].permissions)</th>
                            <th scope="col">操作</th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var user in Model)
                        {
                            <tr>
                                <th scope="row"><b>@user.id</b></th>
                                <td><b>@user.name</b></td>
                                <td><b>@user.Phone</b></td>
                                <td><b>@user.permissions</b></td>
                                <td>
                                    <a href="javascript:openUpdateWin(@user.id)" class="tm-product-delete-link">
                                        <i class="far fa-eye tm-product-delete-icon"></i>
                                    </a>
                                    <a href="javascript:openUpdateWin(@user.id)" class="tm-product-delete-link">
                                        <i class="fa fa-cogs tm-product-delete-icon"></i>
                                    </a>
                                    <a href="@Url.Content("~/AdminUser/User_delete?userid="+@user.id)" class="tm-product-delete-link">
                                        <i class="far fa-trash-alt tm-product-delete-icon"></i>
                                    </a>
                                </td>
                            </tr>
                         }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
